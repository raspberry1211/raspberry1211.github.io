<!DOCTYPE html>
<html>
<head>
    <title>Card Gallery</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 700px; margin: auto; }
        h1 { text-align: center; }
        input[type="search"] {
            width: 100%;
            padding: 10px;
            font-size: 1.1em;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        button#backButton {
            display: none;
            margin-bottom: 20px;
            padding: 8px 15px;
            font-size: 1em;
            cursor: pointer;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 4px;
        }
        button#backButton:hover {
            background-color: #0056b3;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            margin: 8px 0;
        }
        a {
            text-decoration: none;
            color: #007BFF;
            font-weight: bold;
        }
        a:hover {
            text-decoration: underline;
        }
        .search-result {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        .search-result img {
            max-width: 60px;
            max-height: 90px;
            border: 1px solid #ccc;
        }
        .search-result div {
            flex: 1;
        }
        /* Colored card titles with subtle shadow for readability */
        strong {
            font-weight: 700;
            text-shadow: 0 0 3px rgba(0,0,0,0.6);
        }
    </style>
</head>
<body>
<h1>Card Gallery</h1>
<input type="search" id="searchInput" placeholder="Search cards by name or text...">
<button id="backButton">â¬… Back to Index</button>
<div id="searchResults"></div>
<ul id="folderList" style="display:block;">
<li><a href="Pyromancers.html">Pyromancers</a></li>
<li><a href="Legion of Seven Swords.html">Legion of Seven Swords</a></li>
<li><a href="Prototypes.html">Prototypes</a></li>
<li><a href="Morticians.html">Morticians</a></li>
<li><a href="Dusk Agents.html">Dusk Agents</a></li>
<li><a href="Oria.html">Oria</a></li>
<li><a href="Cultists.html">Cultists</a></li>

</ul>
<script>
const searchInput = document.getElementById('searchInput');
const searchResults = document.getElementById('searchResults');
const folderList = document.getElementById('folderList');
const backButton = document.getElementById('backButton');
let cards = [];

fetch('cards.json')
  .then(res => res.json())
  .then(data => {
    cards = data;
  });

searchInput.addEventListener('input', () => {
  const query = searchInput.value.trim().toLowerCase();
  if (query.length === 0) {
    searchResults.innerHTML = '';
    folderList.style.display = 'block';
    backButton.style.display = 'none';
    return;
  }

  folderList.style.display = 'none';
  backButton.style.display = 'inline-block';

  const filtered = cards.filter(card =>
    card.filename.toLowerCase().includes(query) ||
    card.text.toLowerCase().includes(query)
  );

  if (filtered.length === 0) {
    searchResults.innerHTML = '<p>No matching cards found.</p>';
    return;
  }

  searchResults.innerHTML = filtered.map(card => `
    <div class="search-result">
      <a href="${card.url}" target="_blank" rel="noopener noreferrer">
        <img src="${card.thumb_url}" alt="${card.filename}" loading="lazy">
      </a>
      <div>
        <strong style="color: ${card.color}">${card.filename.replace(/\.[^/.]+$/, "")}</strong><br>
        <small>${card.text.substring(0, 150).replace(/\n/g, ' ')}${card.text.length > 150 ? '...' : ''}</small>
      </div>
    </div>
  `).join('');
});

backButton.addEventListener('click', () => {
  searchInput.value = '';
  searchInput.dispatchEvent(new Event('input'));
  searchInput.focus();
});
</script>
</body>
</html>
